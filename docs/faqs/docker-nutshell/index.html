<!DOCTYPE html>
<html>
<head>
	<title>Docker in NutShell</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<meta name="author" content="">
	<link rel="shortcut icon" type='image/x-icon' href="/img/favicon.ico">
	<link rel="stylesheet" type="text/css" href="/docs/css/external/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="/docs/css/normalize.css">
	<link rel="stylesheet" type="text/css" href="/docs/css/font-awesome/css/font-awesome.min.css">

	<link rel="stylesheet" type="text/css" href="/docs/css/solarized_dark.css">
	<link rel="stylesheet" type="text/css" href="/docs/css/tutorials.css">
	<link rel="stylesheet" type="text/css" href="/docs/css/style.css">
	<link rel="stylesheet" type="text/css" href="/docs/css/toc.css">

	
		<link rel="stylesheet" href="/docs/{{site.baseurl}}/css/tutorials.css">
	
		<link rel="stylesheet" href="/docs/{{site.baseurl}}/css/solarized_dark.css">
	

	<!-- needed for tutorial specific css -->
	
</head>
<body>	
	

	<!--
	<div class="container" id="main-container">
		<div class="topNavbar">
			<div class="navbar-div" id="logo">
			<a class="logoLink" href="/">BIOJS</a>
			</div>
			<div class="navbar-div" id="navbar-links2">
				<li>
			
			</div>
		</div>
	-->


    <div id="biojs-menu">
<div class="Menu">
        <div class="list">
            <div class="logoDiv">
                <img src="/docs/img/logo.png" id="logoImg">
                <div class="logoDivName">BioContainers Edu.</div>
            </div>


        <span class="item-heading"> Basics </span>
			
	
				<a class="item " href="/docs/101/intro/">Intro</a>
			
	
				<a class="item " href="/docs/101/what_is_biocontainers/">BioContainers?</a>
			
	
				<a class="item " href="/docs/101/getting_started/">User Getting started</a>
			
	
				<a class="item " href="/docs/101/running-example/">BioContainer example</a>
			
	
				<a class="item " href="/docs/101/biocontainers-rkt/">BioContainers in rkt</a>
			
	
				<a class="item " href="/docs/101/biocontainers-architecture/">BioContainers Arch</a>
			
	
				<a class="item " href="/docs/101/biocontainers-registry/">Registry UI</a>
			
		

        <span class="item-heading"> Developer tutorial </span>
			
	
				<a class="item " href="/docs/developer-manual/developer-intro/">Developer Intro</a>
			
	
				<a class="item " href="/docs/developer-manual/biocotainers-dockerfile/">Dockerfile Template</a>
			
	
				<a class="item " href="/docs/developer-manual/best-practices/">Best Practices</a>
			
	
				<a class="item " href="/docs/developer-manual/biocontainers-input-output/">Input/Outpout</a>
			
	
				<a class="item " href="/docs/developer-manual/deploy-dockerhub/">Deploy to DockerHub</a>
			
	
				<a class="item " href="/docs/developer-manual/contributing/">Contributing</a>
			
		

        <span class="item-heading"> BioContainers FAQS </span>
			
	
				<a class="item item-active" href="/docs/faqs/docker-nutshell/">Docker in NutShell</a>
			
	
				<a class="item " href="/docs/faqs/rkt-vs-docker/">rkt vs docker</a>
			
	
				<a class="item " href="/docs/faqs/galaxy-biocontainers/">Galaxy Integration</a>
			
	
				<a class="item " href="/docs/faqs/manually-remove-dockerboot/">Remove boot2docker</a>
			
		

        <span class="item-heading"> Containers Examples </span>
			
	
				<a class="item " href="/docs/containers-examples/DIAUmpire/">DIA-Umpire</a>
			
	
				<a class="item " href="/docs/containers-examples/Comet/">Comet</a>
			
	
				<a class="item " href="/docs/containers-examples/ms-search/">MS Search</a>
			
	
				<a class="item " href="/docs/containers-examples/SNP-Calling/">SNP Calling</a>
			
		

        <span class="item-heading"> Presentations </span>
			
	
				<a class="item " href="/docs/presentations/presentations/">Presentations</a>
			
		
    </div>
</div>

	</div>

	<div id="biojs-main-content">
		
		<div class="heading row">

  <div class="col-md-6 col-xs-7 col-lg-5" id="contentTitleCell">
	  <span class="contentTitle">Docker in NutShell </span>

	  <a class="gitStar" style="width:150px;" href="https://github.com/biocontainers/edu/blob/master/series/faqs/30_docker-nutshell.md" target="_blank"><span class="glyphicon glyphicon-pencil" style="font-size:14px;" ></span> Improve this page</a>
  </div>

	<div class="col-xs-2 col-md-3">
		<div id="biojs-iconnav-glyphs">
	  <a class="git" href="https://github.com/biocontainers/" target="_blank"><i class="fa fa-github-alt"></i></a>

	  <a class="git"  href="http://biocontainers.pro" target="_blank"><i class="fa fa-home"></i></a>
	  <a class="git hidden-xs hidden-sm" href="https://kiwiirc.com/client/irc.freenode.net/biocontainers" target="_blank"><i class="fa fa-weixin"></i></a>
	  <a class="git hidden-xs hidden-sm" id="bookmark-link" href="#"><i class="fa fa-bookmark"></i></a>

  </div>

<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function() {
    $('#bookmark-link').click(function() {
        if (window.sidebar && window.sidebar.addPanel) { // Mozilla Firefox Bookmark
            window.sidebar.addPanel(document.title,window.location.href,'');
        } else if(window.external && ('AddFavorite' in window.external)) { // IE Favorite
            window.external.AddFavorite(location.href,document.title);
        } else if(window.opera && window.print) { // Opera Hotlist
            this.title=document.title;
            return true;
        } else { // webkit - safari/chrome
            alert('Press ' + (navigator.userAgent.toLowerCase().indexOf('mac') != - 1 ? 'Command/Cmd' : 'CTRL') + ' + D to bookmark this page.');
        }
    });
});
</script>

	  <a class="gitStar hidden-xs hidden-sm" style="width:150px;" id="biojs-iconnav-help" href="https://gitter.im/biocontainers/Lobby" target="_blank"><span class="glyphicon glyphicon-bullhorn" style="font-size:17px;" ></span> Get help</a>

  </div>
  <div class="col-md-2 col-lg-2 hidden-xs hidden-sm" id="social-media-share">

    <!-- share it: twitter, google -->
    <div style="height:25px"> <a href="https://twitter.com/share" class="twitter-share-button" style="width: 40px">Tweet</a>

      <script>
        ! function(d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0],
                    p = /^http:/.test(d.location) ? 'http' : 'https';
                if (!d.getElementById(id)) {
                    js = d.createElement(s);
                    js.id = id;
                    js.src = p + '://platform.twitter.com/widgets.js';
                    fjs.parentNode.insertBefore(js, fjs);
                }
            }(document, 'script', 'twitter-wjs');
      </script>
      <script src="https://apis.google.com/js/platform.js" async defer></script>
	  <div class="share-google-button">
      	<div class="g-plus" data-action="share" data-annotation="bubble"
      data-align="right"></div>
	  </div>
    </div>

    </div>


    <div class="author col-md-2 col-xs-2 hidden-xs">
			<div class="tutorial-item"><span class="glyphicon glyphicon-calendar" style="font-size:14px;margin-bottom: 2px;"></span> 08 Feb 2017</div>
	        
			
	        <div class="tutorial-item"><span class="glyphicon glyphicon-time" style="font-size:14px;margin-bottom: 2px;"></span> 15 minutes </div>
	        
	</div>

</div>

<div class="pullButton pullButton-mob">
	<i class="fa fa-bars fa-2x"></i>
</div>


<div class="containerBody">
	<!--
    <div class="leftPanel">

		

    </div>
	-->
    <div class="rightPanel">



        <div class="static-content">

            <div id="explanation" style="display:none">
                <div style="display:block"><div class="tutorials-highlight" style="display:block;"><span class="glyphicon glyphicon-check" style="float:left;display:block;margin-right:20px"></span><div class="tutorials-highlight-text">
<p>We will use this icon to mark check points.
A check point is a way for you to check how you are doing.</p>
</div></div></div>

<div style="display:block"><div class="tutorials-highlight" style="display:block;"><span class="glyphicon glyphicon-minus-sign" style="float:left;display:block;margin-right:20px"></span><div class="tutorials-highlight-text">
<p>For most of the steps in this tutorial we will
provide the code as it should look after the task. It is tempting, we
know, but please, please, do not go for the “copy&amp;paste” way.</p>
</div></div></div>

<div style="display:block"><div class="tutorials-highlight" style="display:block;"><span class="glyphicon glyphicon-road" style="float:left;display:block;margin-right:20px"></span><div class="tutorials-highlight-text">
<p>We will use this icon to challenge you
with additional code-related tasks so you can go further at your own
pace. No inline answer will be provide for those challenges but we will
give you some guidelines and tips. By the way, within the instructions
we will use <em>an italic font</em> to refer to variables and pieces of code.</p>
</div></div></div>

<div style="display:block"><div class="tutorials-highlight" style="display:block;"><span class="glyphicon glyphicon-bell" style="float:left;display:block;margin-right:20px"></span><div class="tutorials-highlight-text">
<p>We will use this icon to ask you some questions related to the task your are working on.</p>
</div></div></div>

<div style="display:block"><div class="tutorials-highlight" style="display:block;"><span class="glyphicon glyphicon-info-sign" style="float:left;display:block;margin-right:20px"></span><div class="tutorials-highlight-text">
<p>Additional info and resources - this is not essential to complete the tutorial, but very interesting.</p>
</div></div></div>

<div style="display:block"><div class="tutorials-highlight" style="display:block;"><span class="glyphicon glyphicon-gift" style="float:left;display:block;margin-right:20px"></span><div class="tutorials-highlight-text">
<p>Tips that might help you on this task.</p>
</div></div></div>

<div style="display:block"><div class="tutorials-highlight" style="display:block;"><span class="glyphicon glyphicon-hand-up" style="float:left;display:block;margin-right:20px"></span><div class="tutorials-highlight-text">
<p>If you are following this tutorial as part of a workshop, do not hesitate to
raise your hand and share any questions or comments you may have.
If you are doing it by your own, you still can raise your hand in our
mailing list, just join our <a href="https://groups.google.com/forum/#!forum/biojs">Google Group</a>.</p>
</div></div></div>


            </div>

            <div class="clearfix"> </div>

<!--

-->
            <h1 id="docker-in-nutshell">Docker in NutShell</h1>

<p>Docker is an open platform for developing, shipping, and running applications. Docker is designed to deliver your applications faster. With Docker you can separate your applications from your
infrastructure.</p>

<p>Docker does this by combining kernel containerization features with workflows and tooling that help you manage
and deploy your applications. At its core, Docker provides a way to run almost any application securely isolated
in a container. The isolation and security allow you to run many containers simultaneously on your host.</p>

<p>Docker’s container-based platform allows for highly portable workloads. Docker containers can run on a developer’s
local host, on physical or virtual machines in a data center, or in the Cloud.</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/aLipr7tTuA4" frameborder="0" allowfullscreen=""></iframe>

<h2 id="what-are-the-major-docker-components">What are the major Docker components?</h2>

<p>Docker has two major components:</p>

<ul>
  <li><a href="https://docs.docker.com/engine/quickstart/">Docker Engine</a>: the open source containerization platform.</li>
  <li><a href="https://hub.docker.com">Docker Hub</a>: our Software-as-a-Service platform for sharing and managing Docker containers.</li>
</ul>

<h2 id="what-is-dockers-architecture">What is Docker’s architecture?</h2>

<p>Docker uses a client-server architecture. The Docker client talks to the Docker daemon, which does the heavy lifting of building,
running, and distributing your Docker containers. Both the Docker client and the daemon can run on the same system, or you can connect a Docker client to a remote Docker daemon.</p>

<h3 id="how-does-a-docker-image-work">How does a Docker image work?</h3>

<p>We’ve already seen that Docker images are read-only templates from which Docker containers are launched.
Each image consists of a series of layers. Docker makes use of union file systems to combine these layers into a single image.
Union file systems allow files and directories of separate file systems, known as branches, to be transparently overlaid,
forming a single coherent file system.</p>

<p>One of the reasons Docker is so lightweight is because of these layers. When you change a Docker image—for example,
update an application to a new version— a new layer gets built. Thus, rather than replacing the whole image or entirely rebuilding,
as you may do with a virtual machine, only that layer is added or updated. Now you don’t need to distribute a whole new image,
just the update, making distributing Docker images faster and simpler.</p>

<p>Every image starts from a <strong>Base image</strong>, for example ubuntu, a base Ubuntu image, or fedora, a base Fedora image.
You can also use images of your own as the basis for a new image.</p>

<p>Docker images are then built from these base images using a simple, descriptive set of steps we call instructions.
Each instruction creates a new layer in our image. Instructions include actions like:</p>

<ul>
  <li>Run a command</li>
  <li>Add a file or directory</li>
  <li>Create an environment variable</li>
  <li>What process to run when launching a container from this image</li>
</ul>

<p>These instructions are stored in a file called a Dockerfile. A <strong>Dockerfile</strong> is a text based script that contains instructions and commands for building the image from the base image. Docker reads this Dockerfile when you request a build of an image, executes the instructions, and returns a final image.</p>

<pre><code>
# Base Image
FROM biocontainers/biocontainers:latest

# Metadata
LABEL base.image="biocontainers:latest"
LABEL version="3"
LABEL software="Comet"
LABEL software.version="2016012"
LABEL description="an open source tandem mass spectrometry sequence database search tool"
LABEL website="http://comet-ms.sourceforge.net/"
LABEL documentation="http://comet-ms.sourceforge.net/parameters/parameters_2016010/"
LABEL license="http://comet-ms.sourceforge.net/"
LABEL tags="Proteomics"

# Maintainer
MAINTAINER Felipe da Veiga Leprevost &lt;felipe@leprevost.com.br&gt;

USER biodocker

RUN ZIP=comet_binaries_2016012.zip &amp;&amp; \
  wget https://github.com/BioDocker/software-archive/releases/download/Comet/$ZIP -O /tmp/$ZIP &amp;&amp; \
  unzip /tmp/$ZIP -d /home/biodocker/bin/Comet/ &amp;&amp; \
  chmod -R 755 /home/biodocker/bin/Comet/* &amp;&amp; \
  rm /tmp/$ZIP

RUN mv /home/biodocker/bin/Comet/comet_binaries_2016012/comet.2016012.linux.exe /home/biodocker/bin/Comet/comet

ENV PATH /home/biodocker/bin/Comet:$PATH

WORKDIR /data/

CMD ["comet"]

</code></pre>

<h3 id="how-does-a-container-work">How does a container work?</h3>

<p>A container consists of an operating system, user-added files, and meta-data. As we’ve seen, each container is built from an image.
That image tells Docker what the container holds, what process to run when the container is launched, and a variety of other
configuration data. The Docker image is read-only.</p>

<p>When Docker runs a container from an image, it adds a read-write layer on top of the image
(using a union file system as we saw earlier) in which your application can then run.</p>

<p>When you run a container, either by using the docker binary or via the API, the Docker client tells
the Docker daemon to run a container.</p>

<pre><code>$ docker run -i -t ubuntu /bin/bash
</code></pre>

<blockquote>
  <p>The Docker Engine client is launched using the docker binary with the run option running a new container. The bare minimum the
Docker client needs to tell the Docker daemon to run the container is:</p>
</blockquote>

<blockquote>
  <p>What Docker image to build the container from, for example: <strong>ubuntu</strong>
The command you want to run inside the container when it is launched, for example: <strong>/bin/bash</strong></p>
</blockquote>

<h3 id="dockerhub-automated-builds">DockerHub Automated Builds</h3>

<p>DockerHub provides limited resources for automated builds. Sometimes, depending on how your program compiles, you may end up having problems trying to build your image. Last time we checked, DockerHub is providing the following resources:</p>

<ul>
  <li>2 hours</li>
  <li>2 GB RAM</li>
  <li>1 CPU</li>
  <li>30 GB Disk Space</li>
</ul>

<p>If you want to containerize your software, make sure that you are not using more than provided or else the image will not be available through the Docker Registry.</p>

<h2 id="how-to-avoid-timeouts">How to avoid Timeouts</h2>

<p>One of the problems are are facing with some images is the <code>TimeOut</code> error. This happens when the compilation time takes more than 2 hours. In order to avoid this, one strategy is to break your build in separate Dockerfile recipes, and then use the <code>FROM</code> command to import them.</p>

<h2 id="references">References:</h2>

<ul>
  <li><a href="https://docs.docker.com/engine/understanding-docker/">Understand Docker Architecture</a></li>
  <li><a href="https://www.youtube.com/watch?v=pGYAg7TMmp0">Docker Tutorial - What is Docker &amp; Docker Containers, Images, etc?</a></li>
  <li><a href="https://www.digitalocean.com/community/tutorials/the-docker-ecosystem-an-introduction-to-common-components">Docker Ecosystem</a></li>
</ul>


           <div id="lower-link-box" class="link-box">
				
				
					<a href="/docs/faqs/rkt-vs-docker/" class="btn btn-primary next-link pull-right">Next</a>
				

				<br />
			</div>

		</div>
	</div>

<!-- temporaroy removed

-->

<script>
document.addEventListener("DOMContentLoaded", function() {
	// load highlighted code blocks
    $('pre code').each(function(i, block) {
      hljs.highlightBlock(block);
    });
	jQuery(".collapsible").each(function(i,e){
		collapseStuff(e,"Hide the code", "Display the code");
	});
	/*
	DO NOT show the explanation
	collapseStuff("#explanation","Hide the icon explanation", "Display the icon explanation");
	jQuery("#explanation").css("display", "block");
	*/
});
function collapseStuff(e, textHidden, textDisplayed){
	var divHigh = $(e);
	var children = divHigh.children();
	children.hide();
	var toggleBox = document.createElement("div");
	toggleBox.className = "tutorials-togglebox";
	divHigh.prepend(toggleBox);
	var awesomeIcon = document.createElement("span");
	var awesomeText= document.createElement("span");
	awesomeIcon.className = "tutorials-togglebox-icon glyphicon glyphicon-chevron-down";
	awesomeText.textContent = "Display the code";
	awesomeText.className = "tutorials-togglebox-text";
	toggleBox.appendChild(awesomeIcon);
	toggleBox.appendChild(awesomeText);
	awesomeText.textContent = textDisplayed;
	$(toggleBox).click(function(){
		var codeBox = children;
		var text = divHigh.children().first();
		if( codeBox.css("display") == "none" ){
			codeBox.show(700);
			awesomeText.textContent = textHidden;
			awesomeIcon.className = "tutorials-togglebox-icon glyphicon glyphicon-chevron-up";
		}else{
			codeBox.hide(500);
			awesomeText.textContent = textDisplayed;
			awesomeIcon.className = "tutorials-togglebox-icon glyphicon glyphicon-chevron-down";
		}
	});
};
</script>

<script src="/docs/js/highlight.min.js"></script>

	</div>
		
		</div>
		<!--
		<div class="footer">
			<div class="improve-this-page">
				<span class="glyphicon glyphicon-pencil"></span> <a href="https://github.com/biojs/edu/blob/master/series/faqs/30_docker-nutshell.md">Improve this page</a>
			</div>

			<div id="privacy-notice-less" class="privacy-policy">
				Privacy Policy.
			</div>
			<div id="privacy-notice-more"  class="privacy-policy" style="display:none">
				This website uses Google Analytics to collect anonymous visiting stats.<br />
				By visiting this site you agree to the <a href="https://www.google.com/analytics/terms/us.html">data processing agreement</a> by Google.<br />
				If you do not agree, <a href="http://www.usa.gov/optout-instructions.shtml">opt out</a>.
			</div>
		
		</div>
		-->


	<script type="text/javascript" src="/docs/js/jquery.min.js"></script>
	<script type="text/javascript" src="/docs/js/highlight.min.js"></script>
	<script type="text/javascript" src="/docs/js/jquery-scrollspy.js"></script>
	<script type="text/javascript" src="/docs/js/bottom.js"></script>
	<script type="text/javascript" src="/docs/js/bootstrap.min.js"></script>

			<script type="text/javascript">
	        $(document).ready(function() {
        			$('.color').each(function(i) {
        				var position = $(this).position();
        				console.log(position);
        				console.log('min: ' + position.top + ' / max: ' + parseInt(position.top + $(this).height()));
        				$(this).scrollspy({
        					min: position.top,
        					max: position.top + $(this).height(),
        					onEnter: function(element, position) {
        						if(console) console.log('entering ' +  element.id);
        						$("body").css('background-color', element.id);
        					},
        					onLeave: function(element, position) {
        						if(console) console.log('leaving ' +  element.id);
        					//	$('body').css('background-color','#eee');
        					}
        				});
        			});
        		});
        	</script>
	<script type="text/javascript">

		/*
		$(window).scroll(function(){
    		$(".topNavbar").css({"top": ($(window).scrollTop()) + "px"});        
    		if ($(window).scrollTop() > 140){
	    		$(".leftPanel").css({"top": ($(window).scrollTop()) -140 + "px"});
			}
    	});
    	*/

		$('.pullButton').click(function(e){
			$("#biojs-menu").css("display","block");
			$("#biojs-main-content").css("margin-left","220px");
			$(".pullButton").removeClass("pullButton-mob");
			e.stopPropagation();
			return false;
		});

		$(window).click(function(){
			closeMenu();
		});
		$('.Menu').click(function(){
			closeMenu();
		});

		function closeMenu(){
			if(isMobile()){
				$("#biojs-menu").css("display","none");
				$(".pullButton").addClass("pullButton-mob");
				$("#biojs-main-content").css("margin-left","0px");
			}
		}
		function isMobile(){
			return $(window).width() <= 600;
		}

	</script>


	


	<script>hljs.initHighlightingOnLoad();</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-51509688-5', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>

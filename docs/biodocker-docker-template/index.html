<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="">
    <meta name="keywords" content="">
    <title>Biodocker dockerfile template </title>
    <link rel="shortcut icon" href="../images/favicon.png" type="image/png">
    <link rel="stylesheet" href="../dist/assets/css/app.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.2.6/animate.min.css">
    <link rel="stylesheet" href="../css/custom.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="../dist/assets/js/modernizr.js"></script>
</head>
<body>
  <div class="off-canvas-wrap" data-offcanvas>
    <div class="inner-wrap">

      <a class="left-off-canvas-toggle" href="#" >
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="35px" height="35px" viewBox="0 0 35 35" enable-background="new 0 0 35 35" xml:space="preserve">
          <path fill="#3597D4" d="M30.583,9.328c0,0.752-0.539,1.362-1.203,1.362H5.113c-0.664,0-1.203-0.61-1.203-1.362l0,0
          c0-0.752,0.539-1.362,1.203-1.362H29.38C30.045,7.966,30.583,8.576,30.583,9.328L30.583,9.328z"/>
          <path fill="#3597D4" d="M30.583,17.09c0,0.752-0.539,1.362-1.203,1.362H5.113c-0.664,0-1.203-0.61-1.203-1.362l0,0
          c0-0.752,0.539-1.362,1.203-1.362H29.38C30.045,15.728,30.583,16.338,30.583,17.09L30.583,17.09z"/>
          <path fill="#3597D4" d="M30.583,24.387c0,0.752-0.539,1.362-1.203,1.362H5.113c-0.664,0-1.203-0.61-1.203-1.362l0,0
          c0-0.752,0.539-1.362,1.203-1.362H29.38C30.045,23.025,30.583,23.635,30.583,24.387L30.583,24.387z"/>
        </svg>
      </a>
      <a class="button secondary small get-started-cta">Get Started</a>
      <header class="main-header">
        <div class="row">
          <div class="large-3 columns">
            <a href="http://biodocker.org/"><img class="logo" src="../dist/assets/images/logo.png"></a>
          </div>
          <div class="large-9 columns">
            <ul class="nav-global">
              <li><a class="button" href="../quick-start-users/">Get Started</a></li>
            </ul>
            <ul class="nav-main">
              <li><a href="../what-is-biodocker/">BioDocker</a>
                <ul>
                  <li><a href="../what-is-biodocker/">What is Docker?</a></li>
                  <li><a href="../biodocker-history/">BioDocker History</a></li>
                </ul>
              </li>
              
              <li><a href="https://github.com/biodocker">GitHub</a>
                <ul>
                  <li><a href="https://github.com/BioDocker/biodocker">Specification</a></li>
                  <li><a href="https://github.com/BioDocker/containers">Containers</a></li>
                  <li><a href="https://github.com/BioDocker/sandbox">Sandbox</a></li>
                  <li><a href="https://github.com/BioDocker/containers/issues">Issues</a></li>
                </ul>
              </li>
              <li><a href="https://hub.docker.com/u/biodckr/">Registry</a>

              </li>
            </ul>
          </div>
        </div>
      </header>

      
      <aside class="left-off-canvas-menu">
        <ul class="off-canvas-list">
          <li class="has-submenu"><a href="../what-is-biodocker/">BioDocker</a>
            <ul class="left-submenu">
              <li class="back"><a href="#">Back</a></li>
              <li><a href="../what-is-biodocker/">What is Docker?</a></li>
              <li><a href="../biodocker-history/">BioDocker History</a></li>
              <li><a href="../quick-start-users/">Get Started</a></li>
              <li><a href="https://github.com/biodocker">GitHub</a></li>
              <li><a href="https://github.com/BioDocker/biodocker">Specification</a></li>
              <li><a href="https://github.com/BioDocker/containers">Containers</a></li>
              <li><a href="https://github.com/BioDocker/sandbox">Sandbox</a></li>
              <li><a href="https://github.com/BioDocker/containers/issues">Issues</a></li>
              <li><a href="https://hub.docker.com/u/biodckr/">Registry</a></li>o
            </ul>
          </li>
        </ul>

      </aside>
      
      <a class="exit-off-canvas"></a>

<div id="docs" class="row">
    <div class="large-3 columns">
        <section id="multiple" data-accordion-group>
  
  
    <section data-accordion>
      
        <article data-accordion>
          <button data-control> Getting Started</button>
          <div data-content>
            
              
                <a data-link href="../what-is-biodocker/" class=""> What is BioDocker?</a>
              
            
              
                <a data-link href="../biodocker-history/" class=""> BioDocker History</a>
              
            
          </div>
        </article>
       
    </section>
  
    <section data-accordion>
      
        <article data-accordion>
          <button data-control> Docker in NutShell</button>
          <div data-content>
            
              
                <a data-link href="../docker-in-nutshell/" class=""> Docker in NutShell</a>
              
            
              
                <a data-link href="../docker-install/" class=""> How to Install Docker?</a>
              
            
              
                <a data-link href="../docker-client/" class=""> Learn about Docker Client</a>
              
            
          </div>
        </article>
       
    </section>
  
    <section data-accordion>
      
        <article data-accordion>
          <button data-control> Quickstart Guide</button>
          <div data-content>
            
              
                <a data-link href="../biodocker-registry/" class=""> Biodocker Registry</a>
              
            
              
                <a data-link href="../quick-start-users/" class=""> Users Quick Start</a>
              
            
              
                <a data-link href="../biodocker-input-output/" class=""> Using input  and Output files</a>
              
            
          </div>
        </article>
       
    </section>
  
    <section data-accordion>
      
        <article data-accordion>
          <button data-control> Guide for Developers</button>
          <div data-content>
            
              
                <a data-link href="../biodocker-docker-template/" class=" active"> Biodocker dockerfile template</a>
              
            
              
                <a data-link href="../biodocker-best-practices/" class=""> BioDocker best practices</a>
              
            
              
                <a data-link href="../biodocker-deploy-new/" class=""> Deploying a new Project</a>
              
            
          </div>
        </article>
       
    </section>
  
    <section data-accordion>
      
        <article data-accordion>
          <button data-control> About</button>
          <div data-content>
            
              
                <a data-link href="../release-notes/" class=""> About BioDocker</a>
              
            
          </div>
        </article>
       
    </section>
  
</section>

<script>
$(document).ready(function () {
  var $activeLink = $('#multiple [data-link].active');
  var $accordions = $activeLink.parents('article[data-accordion]');
  $($accordions.get().reverse()).each(function (index, accordion) {
    var $accordion = $(accordion);
    var $content = $accordion.find('[data-content]');
    $accordion.addClass('open');
    $content.css({'max-height': '100%'});
  });
});
</script>

    </div>
    <div class="large-6 columns">
      <section id="main">
        <article id="content">
          

<h1 id="biodocker-dockerfile-template">Biodocker dockerfile template</h1>

<p>This is a standard template for creating a new Dockerfile for BioDocker:</p>

<blockquote>
<p>Note: Please always follow the <a href="../biodocker-best-practices/">best practices</a> and help pages <a href="../biodocker-input-output/">Using input and Output files</a> information.</p>
</blockquote>

<p>Bellow is the complete example of a BioDocker Dockerfile:</p>

<pre><code class="language-bash">#################################################################
# Dockerfile
#
# Version:          1
# Software:         Comet
# Software Version: 2015020
# Description:      basic local alignment search tool
# Website:          http://comet-ms.sourceforge.net/
# Tags:             Proteomics
# Provides:         Comet 2015020
# Base Image:       biodckr/biodocker
# Build Cmd:        docker build --rm -t biodckrdev/comet 2015020/.
# Pull Cmd:         docker pull biodckr/comet
# Run Cmd:          docker run --rm -it biodckrdev/comet &lt;options&gt; &lt;files&gt;
# Extra:            Extra information
# Extra:            with new lines if necessary
#################################################################

# Set the base image to biodocker base image
FROM biodckr/biodocker

################## BEGIN INSTALLATION ######################

# Change user to root
USER root

# UPDATE APT, INSTALL PREREQUISITES AND CLEAN CACHE
RUN apt-get clean all &amp;&amp; \
    apt-get update -y &amp;&amp; \
    apt-get upgrade -y &amp;&amp; \
    apt-get install -y wget &amp;&amp; \
    apt-get clean &amp;&amp; \
    apt-get purge &amp;&amp; \
    rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*

# ADD FILES
ADD comet.2015020.linux.exe /home/biodocker/bin/

# RUN COMMANDS
RUN chmod +x /home/biodocker/bin/comet.2015020.linux.exe

# CHANGE USER BACK TO BIODOCKER
USER biodocker

# CHANGE WORKDIR TO /DATA
WORKDIR /data

# DEFINE DEFAULT COMMAND
CMD [&quot;comet.2015020.linux.exe&quot;]

##################### INSTALLATION END #####################

# File Author / Maintainer
MAINTAINER Felipe da Veiga Leprevost &lt;felipe@leprevost.com.br&gt;
# Modified by Yasset Perez-Riverol. 7edf3b0
</code></pre>

<h2 id="header">Header</h2>

<p>Every Dockerfile must have a header with the following items:</p>

<ul>
<li><p><strong>Dockerfile Version</strong>: This is a single-number version system (ex: v1, v2, v3 &hellip;). Every change in the file must increase the version number in 1.</p></li>

<li><p><strong>Software</strong>: The name of the software installed inside the container. This can be a little tricky because some software demand libraries or dependencies. In this case the idea is to describe the &ldquo;principal&rdquo; software of the container, or the reason for built it.</p></li>

<li><p><strong>Software Version</strong>: The version of the software installed.</p></li>

<li><p><strong>Description</strong>:      Single line description of the tool</p></li>

<li><p><strong>Website</strong>:          URL(s) for the program developer separated by vertical bars (|)</p></li>

<li><p><strong>Tags</strong>: Program tags separated by vertical bars (|)</p>

<ul>
<li>Genomics</li>
<li>Protemomics</li>
<li>Transcriptomics</li>
<li>Metabolomics</li>
<li>General</li>
</ul></li>

<li><p><strong>Provides</strong>: List of programs provided separated by vertical bars (|)</p></li>

<li><p>Base Image: All containers are based on a specific GNU/Linux system. There is no preference for a specific OS flavor but, to reduce disk usage, we recommend to use our own biodkr/biodocker image.</p></li>

<li><p>Docker commands: Commands used to build, pull and run the docker image</p></li>

<li><p>Extra: Extra information. this tag can appear multiple times</p></li>
</ul>

<h2 id="image-setting-from">Image Setting - FROM</h2>

<p>The next element is the base image and any configuration to the system you are installing:</p>

<p>In the example above the Base Image is defined as biodckr/biodocker which is based on ubuntu latest LTS (Long Term Support) release and kept up to date with updates.</p>

<h2 id="installation-run">Installation - RUN</h2>

<p>The installation area is where you instructions to build the software will be defined. Here is the correct place to put Dockerfile syntax and system commands.</p>

<pre><code class="language-bash">################### BEGIN INSTALLATION ########################

# Change user to root
USER root

# UPDATE APT, INSTALL PREREQUISITES AND CLEAN CACHE
RUN apt-get clean all &amp;&amp; \
    apt-get update -y &amp;&amp; \
    apt-get upgrade -y &amp;&amp; \
    apt-get install -y wget &amp;&amp; \
    apt-get clean &amp;&amp; \
    apt-get purge &amp;&amp; \
    rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*

# ADD FILES
ADD comet.2015020.linux.exe /home/biodocker/bin/

# RUN COMMANDS
RUN chmod +x /home/biodocker/bin/comet.2015020.linux.exe

# Change user to back to biodocker
USER biodocker

# CHANGE WORKDIR TO /DATA
WORKDIR /data

# DEFINE DEFAULT COMMAND
CMD [&quot;comet.2015020.linux.exe&quot;]

#################### END INSTALLATION #########################
</code></pre>

<ul>
<li>Commands should be merged with &lsquo;&amp;&amp; \&rsquo; whenever possible in order to create fewer intermediate images.</li>
<li>A biodocker user has been created (id 1001) so that applications are not run as root.</li>
<li>If possible, add the program to /usr/bin, otherwise, add to /home/biodocker/bin</li>
<li>return to the regular USER</li>
<li>change the WORKDIR to the data folder</li>
<li>set the VOLUMEs to be exported (/data and /config are exported by default by the base image)</li>
<li>EXPOSE ports (if necessary)</li>
</ul>

<h2 id="signature-maintainer">Signature - MAINTAINER</h2>

<p>The File Author/ Maintainer signature. By default the Dockerfile only accepts one MAINTAINER tag. This will be the place the original author name. After updates are added to the file, the contributors name should appear in commented lines.</p>

<pre><code># File Author / Maintainer
MAINTAINER Felipe da Veiga Leprevost &lt;felipe@leprevost.com.br&gt;
# Modified by Yasset Perez-Riverol. 7edf3b0
</code></pre>

<p>The number after Yasset name is the 7 first digits of the commit.</p>

        </article>
		  </section>
    </div>
    <div id="toc" class="large-3 columns toc ">
     On this page:
        <nav id="TableOfContents">
<ul>
<li><a href="#biodocker-dockerfile-template">Biodocker dockerfile template</a>
<ul>
<li><a href="#header">Header</a></li>
<li><a href="#image-setting-from">Image Setting - FROM</a></li>
<li><a href="#installation-run">Installation - RUN</a></li>
<li><a href="#signature-maintainer">Signature - MAINTAINER</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

<footer class="main-footer">
  <div class="row">
  </div>
  <div class="row">
  </div>
</footer>
<link rel="stylesheet" href="../highlight/styles/github.css">
<script src="../highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script src="../dist/assets/js/all.js"></script>
<script>
  $( 'nav li:has(ul)' ).doubleTapToGo();
</script>
<script>

;(function ( $, window, document, undefined ) {

    var pluginName = 'accordion',
        defaults = {
            transitionSpeed: 300,
            transitionEasing: 'ease',
            controlElement: '[data-control]',
            contentElement: '[data-content]',
            groupElement: '[data-accordion-group]',
            singleOpen: true
        };

    function Accordion(element, options) {
        this.element = element;
        this.options = $.extend({}, defaults, options);
        this._defaults = defaults;
        this._name = pluginName;
        this.init();
    }

    Accordion.prototype.init = function () {
        var self = this,
            opts = self.options;

        var $accordion = $(self.element),
            $controls = $accordion.find('> ' + opts.controlElement),
            $content =  $accordion.find('> ' + opts.contentElement);

        var accordionParentsQty = $accordion.parents('[data-accordion]').length,
            accordionHasParent = accordionParentsQty > 0;

        var closedCSS = { 'max-height': 0, 'overflow': 'hidden' };

        var CSStransitions = supportsTransitions();

        function debounce(func, threshold, execAsap) {
            var timeout;

            return function debounced() {
                var obj = this,
                    args = arguments;

                function delayed() {
                    if (!execAsap) func.apply(obj, args);
                    timeout = null;
                };

                if (timeout) clearTimeout(timeout);
                else if (execAsap) func.apply(obj, args);

                timeout = setTimeout(delayed, threshold || 100);
            };
        }

        function supportsTransitions() {
            var b = document.body || document.documentElement,
                s = b.style,
                p = 'transition';

            if (typeof s[p] == 'string') {
                return true;
            }

            var v = ['Moz', 'webkit', 'Webkit', 'Khtml', 'O', 'ms'];

            p = 'Transition';

            for (var i=0; i<v.length; i++) {
                if (typeof s[v[i] + p] == 'string') {
                    return true;
                }
            }

            return false;
        }

        function requestAnimFrame(cb) {
            if(window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame) {
                return  requestAnimationFrame(cb) ||
                        webkitRequestAnimationFrame(cb) ||
                        mozRequestAnimationFrame(cb);
            } else {
                return setTimeout(cb, 1000 / 60);
            }
        }

        function toggleTransition($el, remove) {
            if(!remove) {
                $content.css({
                    '-webkit-transition': 'max-height ' + opts.transitionSpeed + 'ms ' + opts.transitionEasing,
                    'transition': 'max-height ' + opts.transitionSpeed + 'ms ' + opts.transitionEasing
                });
            } else {
                $content.css({
                    '-webkit-transition': '',
                    'transition': ''
                });
            }
        }

        function calculateHeight($el) {
            var height = 0;

            $el.children().each(function() {
                height = height + $(this).outerHeight(true);
            });

            $el.data('oHeight', height);
        }

        function updateParentHeight($parentAccordion, $currentAccordion, qty, operation) {
            var $content = $parentAccordion.filter('.open').find('> [data-content]'),
                $childs = $content.find('[data-accordion].open > [data-content]'),
                $matched;

            if(!opts.singleOpen) {
                $childs = $childs.not($currentAccordion.siblings('[data-accordion].open').find('> [data-content]'));
            }

            $matched = $content.add($childs);

            if($parentAccordion.hasClass('open')) {
                $matched.each(function() {
                    var currentHeight = $(this).data('oHeight');

                    switch (operation) {
                        case '+':
                            $(this).data('oHeight', currentHeight + qty);
                            break;
                        case '-':
                            $(this).data('oHeight', currentHeight - qty);
                            break;
                        default:
                            throw 'updateParentHeight method needs an operation';
                    }

                    $(this).css('max-height', $(this).data('oHeight'));
                });
            }
        }

        function refreshHeight($accordion) {
            if($accordion.hasClass('open')) {
                var $content = $accordion.find('> [data-content]'),
                    $childs = $content.find('[data-accordion].open > [data-content]'),
                    $matched = $content.add($childs);

                calculateHeight($matched);

                $matched.css('max-height', $matched.data('oHeight'));
            }
        }

        function closeAccordion($accordion, $content) {
            $accordion.trigger('accordion.close');
            
            if(CSStransitions) {
                if(accordionHasParent) {
                    var $parentAccordions = $accordion.parents('[data-accordion]');

                    updateParentHeight($parentAccordions, $accordion, $content.data('oHeight'), '-');
                }

                $content.css(closedCSS);

                $accordion.removeClass('open');
            } else {
                $content.css('max-height', $content.data('oHeight'));

                $content.animate(closedCSS, opts.transitionSpeed);

                $accordion.removeClass('open');
            }
        }

        function openAccordion($accordion, $content) {
            $accordion.trigger('accordion.open');
            if(CSStransitions) {
                toggleTransition($content);

                if(accordionHasParent) {
                    var $parentAccordions = $accordion.parents('[data-accordion]');

                    updateParentHeight($parentAccordions, $accordion, $content.data('oHeight'), '+');
                }

                requestAnimFrame(function() {
                    $content.css('max-height', $content.data('oHeight'));
                });

                $accordion.addClass('open');
            } else {
                $content.animate({
                    'max-height': $content.data('oHeight')
                }, opts.transitionSpeed, function() {
                    $content.css({'max-height': 'none'});
                });

                $accordion.addClass('open');
            }
        }

        function closeSiblingAccordions($accordion) {
            var $accordionGroup = $accordion.closest(opts.groupElement);

            var $siblings = $accordion.siblings('[data-accordion]').filter('.open'),
                $siblingsChildren = $siblings.find('[data-accordion]').filter('.open');

            var $otherAccordions = $siblings.add($siblingsChildren);

            $otherAccordions.each(function() {
                var $accordion = $(this),
                    $content = $accordion.find(opts.contentElement);

                closeAccordion($accordion, $content);
            });

            $otherAccordions.removeClass('open');
        }

        function toggleAccordion() {
            var isAccordionGroup = (opts.singleOpen) ? $accordion.parents(opts.groupElement).length > 0 : false;

            calculateHeight($content);

            if(isAccordionGroup) {
                closeSiblingAccordions($accordion);
            }

            if($accordion.hasClass('open')) {
                closeAccordion($accordion, $content);
            } else {
                openAccordion($accordion, $content);
            }
        }

        function addEventListeners() {
            $controls.on('click', toggleAccordion);
            
            $controls.on('accordion.toggle', function() {
                if(opts.singleOpen && $controls.length > 1) {
                    return false;
                }
                
                toggleAccordion();
            });

            $(window).on('resize', debounce(function() {
                refreshHeight($accordion);
            }));
        }

        function setup() {
            $content.each(function() {
                var $curr = $(this);

                if($curr.css('max-height') != 0) {
                    if(!$curr.closest('[data-accordion]').hasClass('open')) {
                        $curr.css({ 'max-height': 0, 'overflow': 'hidden' });
                    } else {
                        toggleTransition($curr);
                        calculateHeight($curr);

                        $curr.css('max-height', $curr.data('oHeight'));
                    }
                }
            });


            if(!$accordion.attr('data-accordion')) {
                $accordion.attr('data-accordion', '');
                $accordion.find(opts.controlElement).attr('data-control', '');
                $accordion.find(opts.contentElement).attr('data-content', '');
            }
        }

        setup();
        addEventListeners();
    };

    $.fn[pluginName] = function ( options ) {
        return this.each(function () {
            if (!$.data(this, 'plugin_' + pluginName)) {
                $.data(this, 'plugin_' + pluginName,
                new Accordion( this, options ));
            }
        });
    }

})( jQuery, window, document );

$(document).ready(function() {
  $('#multiple [data-accordion]').accordion({
    singleOpen: false
  });
});

</script>


<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-WLGFZV"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WLGFZV');</script>


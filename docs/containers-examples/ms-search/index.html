<!DOCTYPE html>
<html>
<head>
	<title>MS Search</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<meta name="author" content="">
	<link rel="shortcut icon" type='image/x-icon' href="/img/favicon.ico">
	<link rel="stylesheet" type="text/css" href="/docs/css/external/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="/docs/css/normalize.css">
	<link rel="stylesheet" type="text/css" href="/docs/css/font-awesome/css/font-awesome.min.css">

	<link rel="stylesheet" type="text/css" href="/docs/css/solarized_dark.css">
	<link rel="stylesheet" type="text/css" href="/docs/css/tutorials.css">
	<link rel="stylesheet" type="text/css" href="/docs/css/style.css">
	<link rel="stylesheet" type="text/css" href="/docs/css/toc.css">

	
		<link rel="stylesheet" href="/docs/{{site.baseurl}}/css/tutorials.css">
	
		<link rel="stylesheet" href="/docs/{{site.baseurl}}/css/solarized_dark.css">
	

	<!-- needed for tutorial specific css -->
	
</head>
<body>	
	

	<!--
	<div class="container" id="main-container">
		<div class="topNavbar">
			<div class="navbar-div" id="logo">
			<a class="logoLink" href="/">BIOJS</a>
			</div>
			<div class="navbar-div" id="navbar-links2">
				<li>
			
			</div>
		</div>
	-->


    <div id="biojs-menu">
<div class="Menu">
        <div class="list">
            <div class="logoDiv">
                <img src="/docs/img/logo.png" id="logoImg">
                <div class="logoDivName">BioContainers Edu.</div>
            </div>


        <span class="item-heading"> Basics </span>
			
	
				<a class="item " href="/docs/101/intro/">Intro</a>
			
	
				<a class="item " href="/docs/101/what_is_biocontainers/">BioContainers?</a>
			
	
				<a class="item " href="/docs/101/getting_started/">User Getting started</a>
			
	
				<a class="item " href="/docs/101/running-example/">BioContainer example</a>
			
	
				<a class="item " href="/docs/101/biocontainers-rkt/">BioContainers in rkt</a>
			
	
				<a class="item " href="/docs/101/biocontainers-architecture/">BioContainers Arch</a>
			
	
				<a class="item " href="/docs/101/biocontainers-registry/">Registry UI</a>
			
		

        <span class="item-heading"> Developer tutorial </span>
			
	
				<a class="item " href="/docs/developer-manual/developer-intro/">Developer Intro</a>
			
	
				<a class="item " href="/docs/developer-manual/biocotainers-dockerfile/">Dockerfile Template</a>
			
	
				<a class="item " href="/docs/developer-manual/best-practices/">Best Practices</a>
			
	
				<a class="item " href="/docs/developer-manual/biocontainers-input-output/">Input/Outpout</a>
			
	
				<a class="item " href="/docs/developer-manual/deploy-dockerhub/">Deploy to DockerHub</a>
			
	
				<a class="item " href="/docs/developer-manual/contributing/">Contributing</a>
			
		

        <span class="item-heading"> BioContainers FAQS </span>
			
	
				<a class="item " href="/docs/faqs/docker-nutshell/">Docker in NutShell</a>
			
	
				<a class="item " href="/docs/faqs/rkt-vs-docker/">rkt vs docker</a>
			
	
				<a class="item " href="/docs/faqs/galaxy-biocontainers/">Galaxy Integration</a>
			
	
				<a class="item " href="/docs/faqs/manually-remove-dockerboot/">Remove boot2docker</a>
			
		

        <span class="item-heading"> Containers Examples </span>
			
	
				<a class="item " href="/docs/containers-examples/DIAUmpire/">DIA-Umpire</a>
			
	
				<a class="item " href="/docs/containers-examples/Comet/">Comet</a>
			
	
				<a class="item item-active" href="/docs/containers-examples/ms-search/">MS Search</a>
			
	
				<a class="item " href="/docs/containers-examples/SNP-Calling/">SNP Calling</a>
			
		

        <span class="item-heading"> Presentations </span>
			
	
				<a class="item " href="/docs/presentations/presentations/">Presentations</a>
			
		
    </div>
</div>

	</div>

	<div id="biojs-main-content">
		
		<div class="heading row">

  <div class="col-md-6 col-xs-7 col-lg-5" id="contentTitleCell">
	  <span class="contentTitle">MS Search </span>

	  <a class="gitStar" style="width:150px;" href="https://github.com/biocontainers/edu/blob/master/series/containers-examples/30_MS_search.md" target="_blank"><span class="glyphicon glyphicon-pencil" style="font-size:14px;" ></span> Improve this page</a>
  </div>

	<div class="col-xs-2 col-md-3">
		<div id="biojs-iconnav-glyphs">
	  <a class="git" href="https://github.com/biocontainers/" target="_blank"><i class="fa fa-github-alt"></i></a>

	  <a class="git"  href="http://biocontainers.pro" target="_blank"><i class="fa fa-home"></i></a>
	  <a class="git hidden-xs hidden-sm" href="https://kiwiirc.com/client/irc.freenode.net/biocontainers" target="_blank"><i class="fa fa-weixin"></i></a>
	  <a class="git hidden-xs hidden-sm" id="bookmark-link" href="#"><i class="fa fa-bookmark"></i></a>

  </div>

<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function() {
    $('#bookmark-link').click(function() {
        if (window.sidebar && window.sidebar.addPanel) { // Mozilla Firefox Bookmark
            window.sidebar.addPanel(document.title,window.location.href,'');
        } else if(window.external && ('AddFavorite' in window.external)) { // IE Favorite
            window.external.AddFavorite(location.href,document.title);
        } else if(window.opera && window.print) { // Opera Hotlist
            this.title=document.title;
            return true;
        } else { // webkit - safari/chrome
            alert('Press ' + (navigator.userAgent.toLowerCase().indexOf('mac') != - 1 ? 'Command/Cmd' : 'CTRL') + ' + D to bookmark this page.');
        }
    });
});
</script>

	  <a class="gitStar hidden-xs hidden-sm" style="width:150px;" id="biojs-iconnav-help" href="https://gitter.im/biocontainers/Lobby" target="_blank"><span class="glyphicon glyphicon-bullhorn" style="font-size:17px;" ></span> Get help</a>

  </div>
  <div class="col-md-2 col-lg-2 hidden-xs hidden-sm" id="social-media-share">

    <!-- share it: twitter, google -->
    <div style="height:25px"> <a href="https://twitter.com/share" class="twitter-share-button" style="width: 40px">Tweet</a>

      <script>
        ! function(d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0],
                    p = /^http:/.test(d.location) ? 'http' : 'https';
                if (!d.getElementById(id)) {
                    js = d.createElement(s);
                    js.id = id;
                    js.src = p + '://platform.twitter.com/widgets.js';
                    fjs.parentNode.insertBefore(js, fjs);
                }
            }(document, 'script', 'twitter-wjs');
      </script>
      <script src="https://apis.google.com/js/platform.js" async defer></script>
	  <div class="share-google-button">
      	<div class="g-plus" data-action="share" data-annotation="bubble"
      data-align="right"></div>
	  </div>
    </div>

    </div>


    <div class="author col-md-2 col-xs-2 hidden-xs">
			<div class="tutorial-item"><span class="glyphicon glyphicon-calendar" style="font-size:14px;margin-bottom: 2px;"></span> 09 Feb 2017</div>
	        
			
	        <div class="tutorial-item"><span class="glyphicon glyphicon-time" style="font-size:14px;margin-bottom: 2px;"></span> 5 minutes </div>
	        
	</div>

</div>

<div class="pullButton pullButton-mob">
	<i class="fa fa-bars fa-2x"></i>
</div>


<div class="containerBody">
	<!--
    <div class="leftPanel">

		

    </div>
	-->
    <div class="rightPanel">



        <div class="static-content">

            <div id="explanation" style="display:none">
                <div style="display:block"><div class="tutorials-highlight" style="display:block;"><span class="glyphicon glyphicon-check" style="float:left;display:block;margin-right:20px"></span><div class="tutorials-highlight-text">
<p>We will use this icon to mark check points.
A check point is a way for you to check how you are doing.</p>
</div></div></div>

<div style="display:block"><div class="tutorials-highlight" style="display:block;"><span class="glyphicon glyphicon-minus-sign" style="float:left;display:block;margin-right:20px"></span><div class="tutorials-highlight-text">
<p>For most of the steps in this tutorial we will
provide the code as it should look after the task. It is tempting, we
know, but please, please, do not go for the “copy&amp;paste” way.</p>
</div></div></div>

<div style="display:block"><div class="tutorials-highlight" style="display:block;"><span class="glyphicon glyphicon-road" style="float:left;display:block;margin-right:20px"></span><div class="tutorials-highlight-text">
<p>We will use this icon to challenge you
with additional code-related tasks so you can go further at your own
pace. No inline answer will be provide for those challenges but we will
give you some guidelines and tips. By the way, within the instructions
we will use <em>an italic font</em> to refer to variables and pieces of code.</p>
</div></div></div>

<div style="display:block"><div class="tutorials-highlight" style="display:block;"><span class="glyphicon glyphicon-bell" style="float:left;display:block;margin-right:20px"></span><div class="tutorials-highlight-text">
<p>We will use this icon to ask you some questions related to the task your are working on.</p>
</div></div></div>

<div style="display:block"><div class="tutorials-highlight" style="display:block;"><span class="glyphicon glyphicon-info-sign" style="float:left;display:block;margin-right:20px"></span><div class="tutorials-highlight-text">
<p>Additional info and resources - this is not essential to complete the tutorial, but very interesting.</p>
</div></div></div>

<div style="display:block"><div class="tutorials-highlight" style="display:block;"><span class="glyphicon glyphicon-gift" style="float:left;display:block;margin-right:20px"></span><div class="tutorials-highlight-text">
<p>Tips that might help you on this task.</p>
</div></div></div>

<div style="display:block"><div class="tutorials-highlight" style="display:block;"><span class="glyphicon glyphicon-hand-up" style="float:left;display:block;margin-right:20px"></span><div class="tutorials-highlight-text">
<p>If you are following this tutorial as part of a workshop, do not hesitate to
raise your hand and share any questions or comments you may have.
If you are doing it by your own, you still can raise your hand in our
mailing list, just join our <a href="https://groups.google.com/forum/#!forum/biojs">Google Group</a>.</p>
</div></div></div>


            </div>

            <div class="clearfix"> </div>

<!--

-->
            <p>Proteomics data analysis is dominated by database-based search engines strategies. 
Perhaps the most common protocol today is to retrieve raw data from a mass spectrometry, convert the
raw data from binary format to a text-based format and then process it using a database search algorithm.
The resulting data need to be statistically filtered in order to converge to a final list of identified peptides
and proteins. Amount Search Engines, Comet (the youngest son of SEQUEST) is one of the most popular nowadays.
Today we are going to show how to run a simple analysis protocol using the Comet database search engine followed
by statistical analysis using PeptideProphet and ProteinProphet, two of the most known and robust processing
algorithms for proteomics data.</p>

<p>This pipeline is available in TPP, however several users prefer to use the individual components rather than Trans-proteomics Pipeline.  The big differential here is how we are going to do it. Instead of going through the step-by-step in how to install and configure Comet and TPP, we are going to run the pipeline using Docker containers from the BioContainers project (you can get more information on the project here).</p>

<h2 id="installing-docker">Installing Docker</h2>

<p>Docker is a freely distributed software, compatible with all operating systems. If you need directions on how to install it, follow the instructions on Docker’s documentation here.</p>

<h2 id="getting-ready">Getting ready</h2>

<p>First thing to do is to arrange the necessary files. For this pipeline we are going to need converted raw files from some mass spectrometry analysis and a protein database in FASTA format.
This are the files I’m using for this tutorial:</p>

<ul>
  <li>b1930_293T_proteinID_10A_QE3_122212.mzXML</li>
  <li>b1931_293T_proteinID_11A_QE3_122212.mzXML</li>
  <li>database.fa</li>
</ul>

<p>I’m placing all these files inside a folder called /home/felipe/workspace/</p>

<h2 id="preparing-the-containers">Preparing the Containers</h2>

<p>The Docker containers wee need are already available to use via Biodocker project. The main goal of this project is to provide ready-to-use containers with bioinformatics software inside. For this tutorial we are going to download 3 containers; Comet and both Prophets.
If you are not familiar with Docker, you should read the material from the original project website. In short words, containers are analogous to virtual machines, except that they do not contain a whole operating system inside. In practical terms we have an isolated lightweight environment with a private file system. Software inside a container can be accessed through command line using the docker daemon._
Back to the tutorial… Lets download the containers we need. Run the following commands, one by one (depending on your configuration, you may need to use sudo for executing commands with the docker daemon):</p>

<pre><code>$ docker pull biocontainers/comet
$ docker pull biocontainers/peptideprophet
$ docker pull biocontainers/proteinprophet
</code></pre>

<h2 id="running-comet">Running Comet</h2>

<p>In order to run Comet we need to print a new parameter file:</p>

<pre><code>&gt; docker run -v /home/felipe/workspace/:/data/ biocontainers/comet comet -p
</code></pre>

<p>To have access to files inside the container, and vice-versa, we need to map a local folder inside the container, that way all files inside this mapped folder will be visible and accessible to us and to the container. This is possible using the parameter -v and passing the complete path from our folder that we wish to map inside the container. In this case we are mapping /home/felipe/workspace into /data/, a pre-existent folder inside the container._
biocontainers/comet is the name of the container we pulled from BioContainers. The ‘comet’ right after is the name of the program inside the container we are running.
After running this command you will see a new file in the folder called comet.params.new, let’s rename it to comet.params and edit some of the options.
In this case I will just change two parameters:</p>

<p><code>database_name = /data/database.fa</code></p>

<p><code>decoy_search = 1</code></p>

<p>Remember that the files inside the container are actually inside a folder called /data/, so that’s how we are going to pass the file location to the programs.
Now we can start the database search:</p>

<pre><code>&gt; docker run -v /home/felipe/workspace/:/data/ biocontainers/comet comet -Pcomet.params b1930_293T_proteinID_10A_QE3_122212.mzXML b1931_293T_proteinID_11A_QE3_122212.mzXML`
</code></pre>

<p>If everything went well you should see two new files on your folder; b1930_293T_proteinID_10A_QE3_122212.pep.xml and b1931_293T_proteinID_11A_QE3_122212.pep.xml</p>

<h2 id="running-peptideprophet">Running PeptideProphet</h2>

<p>For the next step we need to run PeptideProphet, that will overwritte the .pep.xml files we already have:</p>

<pre><code>&gt; docker run -v /home/felipe/workspace/:/data/ biocontainers/peptideprophet PeptideProphet /data/b1930_293T_proteinID_10A_QE3_122212.pep.xml ZERO ACCMASS PPM INSTRWARN DECOY=DECOY_ DECOYPROBS NONPARAM`
&gt; docker run -v /home/felipe/workspace/:/data/ biocontainers/peptideprophet PeptideProphet /data/b1931_293T_proteinID_11A_QE3_122212.pep.xml ZERO ACCMASS PPM INSTRWARN DECOY=DECOY_ DECOYPROBS NONPARAM`
</code></pre>

<p>This parameters are specific to the data set I’m using, you can change them with no problems. To see all the parameters just run:</p>

<pre><code>&gt; docker run biocontainers/peptideprophet PeptideProphet`
</code></pre>

<h2 id="running-proteinprophet">Running ProteinProphet</h2>

<p>Finally, for the last step, we need to run ProteinProphet:</p>

<pre><code>&gt; docker run -v /home/felipe/workspace/:/data/ biocontainers/proteinprophet ProteinProphet /data/b1930_293T_proteinID_10A_QE3_122212.pep.xml /data/b1931_293T_proteinID_11A_QE3_122212.pep.xml /data/result.prot.xml`
</code></pre>

<p>and that’s it, now you have your prot.xml file with the identified proteins.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Again we show how versatile BioContainers containers can be. Even complete analysis protocols like the one showed above can be managed easily without the need to install complex software or manipulating Makefiles. Please feel free to make comments and suggestions. </p>


           <div id="lower-link-box" class="link-box">
				
				<a href="/docs/containers-examples/Comet/" class="btn btn-primary previous-link">Previous</a>
				
				
					<a href="/docs/containers-examples/SNP-Calling/" class="btn btn-primary next-link pull-right">Next</a>
				

				<br />
			</div>

		</div>
	</div>

<!-- temporaroy removed

-->

<script>
document.addEventListener("DOMContentLoaded", function() {
	// load highlighted code blocks
    $('pre code').each(function(i, block) {
      hljs.highlightBlock(block);
    });
	jQuery(".collapsible").each(function(i,e){
		collapseStuff(e,"Hide the code", "Display the code");
	});
	/*
	DO NOT show the explanation
	collapseStuff("#explanation","Hide the icon explanation", "Display the icon explanation");
	jQuery("#explanation").css("display", "block");
	*/
});
function collapseStuff(e, textHidden, textDisplayed){
	var divHigh = $(e);
	var children = divHigh.children();
	children.hide();
	var toggleBox = document.createElement("div");
	toggleBox.className = "tutorials-togglebox";
	divHigh.prepend(toggleBox);
	var awesomeIcon = document.createElement("span");
	var awesomeText= document.createElement("span");
	awesomeIcon.className = "tutorials-togglebox-icon glyphicon glyphicon-chevron-down";
	awesomeText.textContent = "Display the code";
	awesomeText.className = "tutorials-togglebox-text";
	toggleBox.appendChild(awesomeIcon);
	toggleBox.appendChild(awesomeText);
	awesomeText.textContent = textDisplayed;
	$(toggleBox).click(function(){
		var codeBox = children;
		var text = divHigh.children().first();
		if( codeBox.css("display") == "none" ){
			codeBox.show(700);
			awesomeText.textContent = textHidden;
			awesomeIcon.className = "tutorials-togglebox-icon glyphicon glyphicon-chevron-up";
		}else{
			codeBox.hide(500);
			awesomeText.textContent = textDisplayed;
			awesomeIcon.className = "tutorials-togglebox-icon glyphicon glyphicon-chevron-down";
		}
	});
};
</script>

<script src="/docs/js/highlight.min.js"></script>

	</div>
		
		</div>
		<!--
		<div class="footer">
			<div class="improve-this-page">
				<span class="glyphicon glyphicon-pencil"></span> <a href="https://github.com/biojs/edu/blob/master/series/containers-examples/30_MS_search.md">Improve this page</a>
			</div>

			<div id="privacy-notice-less" class="privacy-policy">
				Privacy Policy.
			</div>
			<div id="privacy-notice-more"  class="privacy-policy" style="display:none">
				This website uses Google Analytics to collect anonymous visiting stats.<br />
				By visiting this site you agree to the <a href="https://www.google.com/analytics/terms/us.html">data processing agreement</a> by Google.<br />
				If you do not agree, <a href="http://www.usa.gov/optout-instructions.shtml">opt out</a>.
			</div>
		
		</div>
		-->


	<script type="text/javascript" src="/docs/js/jquery.min.js"></script>
	<script type="text/javascript" src="/docs/js/highlight.min.js"></script>
	<script type="text/javascript" src="/docs/js/jquery-scrollspy.js"></script>
	<script type="text/javascript" src="/docs/js/bottom.js"></script>
	<script type="text/javascript" src="/docs/js/bootstrap.min.js"></script>

			<script type="text/javascript">
	        $(document).ready(function() {
        			$('.color').each(function(i) {
        				var position = $(this).position();
        				console.log(position);
        				console.log('min: ' + position.top + ' / max: ' + parseInt(position.top + $(this).height()));
        				$(this).scrollspy({
        					min: position.top,
        					max: position.top + $(this).height(),
        					onEnter: function(element, position) {
        						if(console) console.log('entering ' +  element.id);
        						$("body").css('background-color', element.id);
        					},
        					onLeave: function(element, position) {
        						if(console) console.log('leaving ' +  element.id);
        					//	$('body').css('background-color','#eee');
        					}
        				});
        			});
        		});
        	</script>
	<script type="text/javascript">

		/*
		$(window).scroll(function(){
    		$(".topNavbar").css({"top": ($(window).scrollTop()) + "px"});        
    		if ($(window).scrollTop() > 140){
	    		$(".leftPanel").css({"top": ($(window).scrollTop()) -140 + "px"});
			}
    	});
    	*/

		$('.pullButton').click(function(e){
			$("#biojs-menu").css("display","block");
			$("#biojs-main-content").css("margin-left","220px");
			$(".pullButton").removeClass("pullButton-mob");
			e.stopPropagation();
			return false;
		});

		$(window).click(function(){
			closeMenu();
		});
		$('.Menu').click(function(){
			closeMenu();
		});

		function closeMenu(){
			if(isMobile()){
				$("#biojs-menu").css("display","none");
				$(".pullButton").addClass("pullButton-mob");
				$("#biojs-main-content").css("margin-left","0px");
			}
		}
		function isMobile(){
			return $(window).width() <= 600;
		}

	</script>


	


	<script>hljs.initHighlightingOnLoad();</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-51509688-5', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
